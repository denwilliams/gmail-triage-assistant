{{define "memories"}}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Memories - Gmail Triage Assistant</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
</head>
<body>
	{{template "nav" .}}
	<main class="container">
		<article>
			<h2>Memory Bank</h2>
			<p>AI-generated insights from your email patterns and processing history.</p>
			<form method="POST" action="/memories/generate" style="display: inline;">
				<button type="submit">Generate Daily Memory</button>
			</form>
			<form method="POST" action="/memories/generate-ai-prompts" style="display: inline; margin-left: 0.5rem;">
				<button type="submit" class="secondary">Generate AI Prompts</button>
			</form>
		</article>

		{{if .Memories}}
			{{range .Memories}}
			<article style="margin-bottom: 1.5rem; border-left: 4px solid {{if eq .Type "daily"}}#0066cc{{else if eq .Type "weekly"}}#28a745{{else if eq .Type "monthly"}}#ff8800{{else}}#9b59b6{{end}}; padding-left: 1rem;">
				<h4 style="margin-bottom: 0.5rem;">
					{{if eq .Type "daily"}}Daily Memory
					{{else if eq .Type "weekly"}}Weekly Memory
					{{else if eq .Type "monthly"}}Monthly Memory
					{{else if eq .Type "yearly"}}Yearly Memory
					{{else}}{{.Type}} Memory
					{{end}}
					<span style="display: inline-block; background: {{if eq .Type "daily"}}#0066cc{{else if eq .Type "weekly"}}#28a745{{else if eq .Type "monthly"}}#ff8800{{else}}#9b59b6{{end}}; color: white; padding: 2px 8px; border-radius: 4px; margin-left: 8px; font-size: 0.85em;">{{.Type}}</span>
				</h4>
				<p style="color: #666; margin: 0.5rem 0;">
					<small><strong>Period:</strong> {{.StartDate.Format "Jan 2, 2006"}} to {{.EndDate.Format "Jan 2, 2006"}}</small>
				</p>
				<div style="margin: 1rem 0; white-space: pre-wrap; line-height: 1.6;">{{.Content}}</div>
				<p style="color: #888; margin: 0.25rem 0;">
					<small>Created: {{.CreatedAt.Format "Jan 2, 2006 3:04 PM"}}</small>
				</p>
			</article>
			{{end}}
		{{else}}
			<article>
				<p><em>No memories generated yet. Click "Generate Daily Memory" to create your first memory from processed emails.</em></p>
			</article>
		{{end}}
	</main>
</body>
</html>
{{end}}
